@startuml ERD

entity "games" as games {
  *game_id : bigint <<generated>>
  --
  name : text <<not null>>
  perspective_id : integer <<FK>>
  platform_id : integer <<FK>>
  finished : boolean <<default false>>
  playtime : numeric
  release_year : smallint
  played_year : smallint <<default CURRENT_YEAR>>
  comments : text
  finished_at : date
}

entity "perspectives" as perspectives {
  *perspective_id : integer <<generated>>
  --
  perspective_name : varchar(50) <<unique>>
}

entity "platforms" as platforms {
  *platform_id : integer <<generated>>
  --
  platform_name : varchar(50) <<unique>>
}

entity "category_tags" as category_tags {
  *tag_id : integer <<generated>>
  --
  tag_name : varchar(50) <<unique>>
}

entity "game_category_tags" as game_category_tags {
  *tag_id : integer <<FK>>
  *game_id : integer <<FK>>
}

entity "land_game_release_dates" as land_game_release_dates {
  *game_id : integer
  --
  name : varchar(255)
  release_date : date
  error : boolean
  log : text
}

games }o--|| perspectives : "perspective_id"
games }o--|| platforms : "platform_id"
games ||--o{ game_category_tags : "game_id"
category_tags ||--o{ game_category_tags : "tag_id"
games ..o| land_game_release_dates : "game_id (staging)"

@enduml