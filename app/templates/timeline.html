{% extends "base.html" %}

{% block title %}Timeline{% endblock %}

{% block content %}
<h1>üìÖ Games Timeline</h1>
<p style="color:#777; margin-bottom:30px;">{{ total_games }} games grouped by year played</p>

{% if timeline %}
<div class="timeline-container">
    {% for year, games in timeline %}
    <div class="timeline-year-block">
        <div class="timeline-year-label">
            {% if year %}{{ year }}{% else %}Unknown{% endif %}
            <span class="year-count">{{ games|length }} game{{ 's' if games|length != 1 else '' }}</span>
        </div>
        <div class="timeline-cards">
            {% for game in games %}
            <a href="{{ url_for('view_game', id=game.game_id) }}" class="timeline-card">
                <div class="timeline-card-title">{{ game.name }}</div>
                <div class="timeline-card-meta">
                    <span class="badge badge-info">{{ game.platform.platform_name }}</span>
                    <span class="badge badge-warning">{{ game.perspective.perspective_name }}</span>
                    {% if game.finished %}
                        <span class="badge badge-success">‚úì Finished</span>
                    {% endif %}
                </div>
                {% if game.playtime %}
                <div class="timeline-card-playtime">üïê {{ "%.1f"|format(game.playtime) }}h</div>
                {% endif %}
                {% if game.release_year %}
                <div class="timeline-card-release">Released: {{ game.release_year }}</div>
                {% endif %}
                {% if game.comments %}
                <div class="timeline-card-comments">{{ game.comments }}</div>
                {% endif %}
                {% if game.tags %}
                <div class="tag-list" style="margin-top:6px;">
                    {% for tag in game.tags %}
                    <span class="badge" style="background:#e8e8f0;color:#555;">{{ tag.tag_name }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </a>
            {% endfor %}
        </div>
    </div>
    {% endfor %}
{% else %}
    <div class="card" style="text-align:center; color:#777; padding:60px;">
        <p style="font-size:1.2em;">No games with a played year found.</p>
        <a href="{{ url_for('create_game') }}" class="btn btn-primary" style="margin-top:20px;">+ Add a Game</a>
    </div>
{% endif %}
</div>

<style>
    .timeline-container { position: relative; padding-left: 20px; }
    .timeline-container::before { content: ''; position: absolute; left: 0; top: 0; bottom: 0; width: 4px; background: linear-gradient(180deg, #667eea 0%, #764ba2 100%); border-radius: 4px; }
    .timeline-year-block { position: relative; margin-bottom: 40px; padding-left: 30px; }
    .timeline-year-block::before { content: ''; position: absolute; left: -10px; top: 10px; width: 22px; height: 22px; border-radius: 50%; background: linear-gradient(135deg, #667eea, #764ba2); border: 3px solid white; box-shadow: 0 0 0 3px #667eea44; }
    .timeline-year-label { font-size: 1.5em; font-weight: 700; color: #333; margin-bottom: 15px; display: flex; align-items: center; gap: 12px; }
    .year-count { font-size: 0.6em; background: #f0f0f8; color: #667eea; padding: 3px 10px; border-radius: 12px; font-weight: 500; }
    .timeline-cards { display: grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap: 14px; }
    .timeline-card { background: #fafafa; border: 1.5px solid #e8e8f0; border-radius: 8px; padding: 14px; text-decoration: none; color: inherit; transition: all 0.2s; display: block; }
    .timeline-card:hover { border-color: #667eea; box-shadow: 0 4px 12px rgba(102,126,234,0.15); transform: translateY(-2px); background: white; }
    .timeline-card-title { font-weight: 600; color: #333; margin-bottom: 8px; font-size: 0.95em; line-height: 1.3; }
    .timeline-card-meta { display: flex; flex-wrap: wrap; gap: 4px; margin-bottom: 6px; }
    .timeline-card-playtime { font-size: 0.82em; color: #888; margin-top: 4px; }
    .timeline-card-release { font-size: 0.8em; color: #aaa; margin-top: 2px; }
    .timeline-card-comments { font-size: 0.82em; color: #666; margin-top: 8px; padding-top: 8px; border-top: 1px solid #ebebf5; line-height: 1.4; display: -webkit-box; -webkit-line-clamp: 3; -webkit-box-orient: vertical; overflow: hidden; }
</style>
{% endblock %}
